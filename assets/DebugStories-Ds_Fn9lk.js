import{r as o,s as u,j as e}from"./index-BZnjROPM.js";function D(){const[n,s]=o.useState([]),[d,i]=o.useState(!0),[r,m]=o.useState(null),[x,l]=o.useState(null);o.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),m(null),console.log("DEBUG: Starting Supabase query...");const{data:t,error:a}=await u.from("stories").select(`
          id,
          title,
          content,
          excerpt,
          featured_image_url,
          view_count,
          like_count,
          comment_count,
          created_at,
          publisher
        `).eq("status","published").eq("is_public",!0).order("created_at",{ascending:!1}).limit(5);if(console.log("DEBUG: Query completed"),console.log("DEBUG: Error:",a),console.log("DEBUG: Data:",t),l({data:t,error:a}),a)throw console.error("Database query error:",a),a;console.log(`DEBUG: Successfully fetched ${(t==null?void 0:t.length)||0} stories`),t&&t.length>0?s(t):(console.log("DEBUG: No stories found"),s([]))}catch(t){console.error("DEBUG: Failed to fetch stories:",t),m(`Failed to load stories: ${t.message}`),s([])}finally{i(!1)}},g=t=>{const a=new Image;a.onload=()=>console.log(`✅ Image loaded: ${t}`),a.onerror=()=>console.log(`❌ Image failed: ${t}`),a.src=t};return e.jsx("div",{className:"min-h-screen bg-background p-8","data-matrix-id":"src/pages/DebugStories.tsx:91:4","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"91","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-background%20p-8%22%7D",children:e.jsxs("div",{className:"max-w-4xl mx-auto","data-matrix-id":"src/pages/DebugStories.tsx:92:6","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"92","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-4xl%20mx-auto%22%7D",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-foreground","data-matrix-id":"src/pages/DebugStories.tsx:93:8","data-matrix-name":"h1","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"93","data-component-file":"DebugStories.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-3xl%20font-bold%20mb-8%20text-foreground%22%7D",children:"Stories Debug Page"}),e.jsxs("div",{className:"mb-8 p-4 bg-muted rounded-lg","data-matrix-id":"src/pages/DebugStories.tsx:96:8","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"96","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-8%20p-4%20bg-muted%20rounded-lg%22%7D",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4","data-matrix-id":"src/pages/DebugStories.tsx:97:10","data-matrix-name":"h2","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"97","data-component-file":"DebugStories.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20mb-4%22%7D",children:"Debug Controls"}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-primary text-primary-foreground rounded mr-4","data-matrix-id":"src/pages/DebugStories.tsx:98:10","data-matrix-name":"button","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"98","data-component-file":"DebugStories.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-primary%20text-primary-foreground%20rounded%20mr-4%22%7D",children:"Refetch Stories"}),e.jsx("button",{onClick:()=>console.log("Current stories state:",n),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded mr-4","data-matrix-id":"src/pages/DebugStories.tsx:104:10","data-matrix-name":"button","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"104","data-component-file":"DebugStories.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-secondary%20text-secondary-foreground%20rounded%20mr-4%22%7D",children:"Log Stories State"}),e.jsx("button",{onClick:()=>{n.forEach(t=>{t.featured_image_url&&g(t.featured_image_url)})},className:"px-4 py-2 bg-accent text-accent-foreground rounded","data-matrix-id":"src/pages/DebugStories.tsx:110:10","data-matrix-name":"button","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"110","data-component-file":"DebugStories.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-accent%20text-accent-foreground%20rounded%22%7D",children:"Test Image Loading"})]}),e.jsxs("div",{className:"mb-8","data-matrix-id":"src/pages/DebugStories.tsx:125:8","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"125","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-8%22%7D",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4","data-matrix-id":"src/pages/DebugStories.tsx:126:10","data-matrix-name":"h2","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"126","data-component-file":"DebugStories.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20mb-4%22%7D",children:"Raw Database Response"}),e.jsx("pre",{className:"bg-muted p-4 rounded-lg text-xs overflow-auto max-h-64","data-matrix-id":"src/pages/DebugStories.tsx:127:10","data-matrix-name":"pre","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"127","data-component-file":"DebugStories.tsx","data-component-name":"pre","data-component-content":"%7B%22className%22%3A%22bg-muted%20p-4%20rounded-lg%20text-xs%20overflow-auto%20max-h-64%22%7D",children:JSON.stringify(x,null,2)})]}),d&&e.jsx("div",{className:"text-center py-12","data-matrix-id":"src/pages/DebugStories.tsx:134:10","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"134","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:e.jsxs("div",{className:"inline-flex items-center space-x-2","data-matrix-id":"src/pages/DebugStories.tsx:135:12","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"135","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-flex%20items-center%20space-x-2%22%7D",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary","data-matrix-id":"src/pages/DebugStories.tsx:136:14","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"136","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-6%20w-6%20border-b-2%20border-primary%22%7D"}),e.jsx("span",{"data-matrix-id":"src/pages/DebugStories.tsx:137:14","data-matrix-name":"span","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"137","data-component-file":"DebugStories.tsx","data-component-name":"span",children:"Loading stories..."})]})}),r&&e.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-8","data-matrix-id":"src/pages/DebugStories.tsx:144:10","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"144","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-destructive%2F10%20border%20border-destructive%2F20%20rounded-lg%20p-4%20mb-8%22%7D",children:[e.jsx("h3",{className:"text-destructive font-semibold mb-2","data-matrix-id":"src/pages/DebugStories.tsx:145:12","data-matrix-name":"h3","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"145","data-component-file":"DebugStories.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-destructive%20font-semibold%20mb-2%22%7D",children:"Error:"}),e.jsx("p",{className:"text-destructive","data-matrix-id":"src/pages/DebugStories.tsx:146:12","data-matrix-name":"p","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"146","data-component-file":"DebugStories.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-destructive%22%7D",children:r})]}),!d&&!r&&e.jsxs("div",{"data-matrix-id":"src/pages/DebugStories.tsx:152:10","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"152","data-component-file":"DebugStories.tsx","data-component-name":"div",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4","data-matrix-id":"src/pages/DebugStories.tsx:153:12","data-matrix-name":"h2","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"153","data-component-file":"DebugStories.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20mb-4%22%7D",children:["Stories (",n.length," found)"]}),n.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground","data-matrix-id":"src/pages/DebugStories.tsx:158:14","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"158","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%20text-muted-foreground%22%7D",children:"No stories found in database"}):e.jsx("div",{className:"space-y-6","data-matrix-id":"src/pages/DebugStories.tsx:162:14","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"162","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:n.map((t,a)=>{var p;return e.jsx("div",{className:"border rounded-lg p-6","data-matrix-id":"src/pages/DebugStories.tsx:164:18","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"164","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22border%20rounded-lg%20p-6%22%7D",children:e.jsxs("div",{className:"flex items-start space-x-4","data-matrix-id":"src/pages/DebugStories.tsx:165:20","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"165","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20space-x-4%22%7D",children:[e.jsx("div",{className:"w-24 h-24 bg-muted rounded-lg flex-shrink-0","data-matrix-id":"src/pages/DebugStories.tsx:167:22","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"167","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-24%20h-24%20bg-muted%20rounded-lg%20flex-shrink-0%22%7D",children:t.featured_image_url?e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-full object-cover rounded-lg",onLoad:()=>console.log(`✅ Image rendered: ${t.featured_image_url}`),onError:()=>console.log(`❌ Image render failed: ${t.featured_image_url}`),"data-matrix-id":"src/pages/DebugStories.tsx:169:26","data-matrix-name":"img","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"169","data-component-file":"DebugStories.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22w-full%20h-full%20object-cover%20rounded-lg%22%2C%22onLoad%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onError%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground text-xs","data-matrix-id":"src/pages/DebugStories.tsx:177:26","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"177","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%20flex%20items-center%20justify-center%20text-muted-foreground%20text-xs%22%7D",children:"No Image"})}),e.jsxs("div",{className:"flex-1","data-matrix-id":"src/pages/DebugStories.tsx:184:22","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"184","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2","data-matrix-id":"src/pages/DebugStories.tsx:185:24","data-matrix-name":"h3","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"185","data-component-file":"DebugStories.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20mb-2%22%7D",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2","data-matrix-id":"src/pages/DebugStories.tsx:186:24","data-matrix-name":"p","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"186","data-component-file":"DebugStories.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-muted-foreground%20mb-2%22%7D",children:t.excerpt||((p=t.content)==null?void 0:p.substring(0,120))+"..."}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground","data-matrix-id":"src/pages/DebugStories.tsx:189:24","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"189","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-4%20text-xs%20text-muted-foreground%22%7D",children:[e.jsxs("span",{"data-matrix-id":"src/pages/DebugStories.tsx:190:26","data-matrix-name":"span","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"190","data-component-file":"DebugStories.tsx","data-component-name":"span",children:["👁 ",t.view_count]}),e.jsxs("span",{"data-matrix-id":"src/pages/DebugStories.tsx:191:26","data-matrix-name":"span","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"191","data-component-file":"DebugStories.tsx","data-component-name":"span",children:["❤️ ",t.like_count]}),e.jsxs("span",{"data-matrix-id":"src/pages/DebugStories.tsx:192:26","data-matrix-name":"span","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"192","data-component-file":"DebugStories.tsx","data-component-name":"span",children:["💬 ",t.comment_count]}),e.jsxs("span",{"data-matrix-id":"src/pages/DebugStories.tsx:193:26","data-matrix-name":"span","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"193","data-component-file":"DebugStories.tsx","data-component-name":"span",children:["📅 ",new Date(t.created_at).toLocaleDateString()]}),e.jsxs("span",{"data-matrix-id":"src/pages/DebugStories.tsx:194:26","data-matrix-name":"span","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"194","data-component-file":"DebugStories.tsx","data-component-name":"span",children:["👤 ",t.publisher]})]}),e.jsxs("div",{className:"mt-2 text-xs font-mono text-muted-foreground","data-matrix-id":"src/pages/DebugStories.tsx:196:24","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"196","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-2%20text-xs%20font-mono%20text-muted-foreground%22%7D",children:["ID: ",t.id]}),e.jsxs("div",{className:"mt-1 text-xs font-mono text-muted-foreground","data-matrix-id":"src/pages/DebugStories.tsx:199:24","data-matrix-name":"div","data-component-path":"src/pages/DebugStories.tsx","data-component-line":"199","data-component-file":"DebugStories.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-1%20text-xs%20font-mono%20text-muted-foreground%22%7D",children:["Image: ",t.featured_image_url||"null"]})]})]})},t.id)})})]})]})})}export{D as default};
