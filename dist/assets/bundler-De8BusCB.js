import{a2 as f,R as g,i as G,a0 as y,M as b,s as p,a3 as l,a4 as U,a5 as I,b as n,a6 as O}from"./vendor-thirdweb-B1z45yR6.js";function w(t){let e;return()=>(e||(e=t()),e)}function x(t={}){return f({filters:t,signature:"event UserOperationRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)"})}function v(t={}){return f({filters:t,signature:"event PostOpRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)"})}function B(t){const{receipt:e}=t,a={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs,status:e.status,to:e.to?e.to:null,transactionHash:e.transactionHash,transactionIndex:e.transactionIndex,type:e.type};return e.blobGasPrice&&(a.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(a.blobGasUsed=BigInt(e.blobGasUsed)),{...t,actualGasCost:BigInt(t.actualGasCost),actualGasUsed:BigInt(t.actualGasUsed),nonce:BigInt(t.nonce),receipt:a,userOpHash:t.userOpHash}}const R=()=>{const t=BigInt(Math.floor(Math.random()*4294967296)),e=BigInt(Math.floor(Math.random()*4294967296)),a=BigInt(Math.floor(Math.random()*4294967296)),r=BigInt(Math.floor(Math.random()*4294967296)),c=BigInt(Math.floor(Math.random()*4294967296)),o=BigInt(Math.floor(Math.random()*4294967296));return t<<BigInt(160)|e<<BigInt(128)|a<<BigInt(96)|r<<BigInt(64)|c<<BigInt(32)|o};function m(t){return Object.fromEntries(Object.entries(t).map(([e,a])=>[e,a==null||G(a)?a:g(a)]))}async function E(t){return s({...t,operation:"eth_sendUserOperation",params:[m(t.userOp),t.options.entrypointAddress??l]})}async function M(t,e){const a=await s({...t,operation:"eth_estimateUserOperationGas",params:[m(t.userOp),t.options.entrypointAddress??l,e??{}]});return{callGasLimit:n(a.callGasLimit)+O,paymasterPostOpGasLimit:a.paymasterPostOpGasLimit!==void 0?n(a.paymasterPostOpGasLimit):void 0,paymasterVerificationGasLimit:a.paymasterVerificationGasLimit!==void 0?n(a.paymasterVerificationGasLimit):void 0,preVerificationGas:n(a.preVerificationGas),verificationGas:a.verificationGas!==void 0?n(a.verificationGas):void 0,verificationGasLimit:n(a.verificationGasLimit)}}async function T(t){const e=await s({...t,operation:"thirdweb_getUserOperationGasPrice",params:[]});return{maxFeePerGas:n(e.maxFeePerGas),maxPriorityFeePerGas:n(e.maxPriorityFeePerGas)}}async function _(t){var a,r;const e=await H(t);if(e){if(e.success===!1){const o=(r=(a=U({events:[x(),v()],logs:e.logs})[0])==null?void 0:a.args)==null?void 0:r.revertReason;if(!o)throw new Error(`UserOp failed at txHash: ${e.receipt.transactionHash}`);const i=I({data:o});throw new Error(`UserOp failed with reason: '${i.args.join(",")}' at txHash: ${e.receipt.transactionHash}`)}return e.receipt}}async function H(t){const e=await s({operation:"eth_getUserOperationReceipt",options:t,params:[t.userOpHash]});if(e)return B(e)}async function A(t){const e=await s({operation:"zk_paymasterData",options:t.options,params:[t.transaction]});return{paymaster:e.paymaster,paymasterInput:e.paymasterInput}}async function L(t){const e=await s({...t,operation:"tw_execute",params:[t.eoaAddress,t.wrappedCalls,t.signature,t.authorization]});if(!e.queueId)throw new Error(`Error executing 7702 transaction: ${p(e)}`);return{transactionId:e.queueId}}async function N(t){return{transactionHash:(await s({...t,operation:"tw_getTransactionHash",params:[t.transactionId]})).transactionHash}}async function k(t){return{transactionHash:(await s({operation:"zk_broadcastTransaction",options:t.options,params:[{...t.transaction,signedTransaction:t.signedTransaction}]})).transactionHash}}async function s(t){const{options:e,operation:a,params:r}=t,c=e.bundlerUrl??y(e.chain),i=await b(e.client)(c,{useAuthToken:!0,body:p({id:1,jsonrpc:"2.0",method:a,params:r}),headers:{"Content-Type":"application/json"},method:"POST"}),u=await i.json();if(!i.ok||u.error){let d=u.error||i.statusText;typeof d=="object"&&(d=p(d));const h=u.code||"UNKNOWN";throw new Error(`${a} error: ${d}
Status: ${i.status}
Code: ${h}`)}return u.result}export{_ as a,T as b,R as c,M as d,L as e,A as f,N as g,m as h,k as i,E as j,w as o};
