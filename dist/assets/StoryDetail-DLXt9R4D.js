import{c as q,u as F,r,s as h,j as t,h as k,U as P,z as H,b as V,n as G,y as R,d as j}from"./index-CW0o6enZ.js";import{C as N,a as A}from"./card-DmazJBpO.js";import{B as U}from"./badge-B9EmuHbr.js";import{S as K,A as O}from"./index-CQvtHsoJ.js";import{M as $}from"./message-square-Dub4yIvD.js";import{m as T}from"./proxy-B3uV5eva.js";import{C as z,H as Y}from"./heart-DPSfq9Nf.js";import{A as L}from"./arrow-left-CSB4BZk8.js";import{E as J}from"./eye-BDFcKtY7.js";import{M as Q}from"./map-pin-klHDTMiz.js";import{S as W}from"./square-pen-CAIaP_SU.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=q("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=q("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function tt({storyId:y,userId:c,sessionId:D,onCommentAdded:m}){const{t:e}=F(),[S,B]=r.useState([]),[C,v]=r.useState(!0),[f,d]=r.useState(!1),[p,g]=r.useState(""),[u,_]=r.useState(""),[I,b]=r.useState(!c);r.useEffect(()=>{E()},[y]);const E=async()=>{try{v(!0);const{data:s,error:i}=await h.from("story_comments").select("*").eq("story_id",y).order("created_at",{ascending:!0});if(i)throw i;B(s||[])}catch(s){console.error("Failed to fetch comments:",s)}finally{v(!1)}},M=async s=>{var i;if(s.preventDefault(),!!p.trim()){if(!c&&!u.trim()){alert("Please enter your name");return}try{d(!0);const{data:a}=await h.functions.invoke("story-interactions",{body:{action:"comment",storyId:y,userId:c,sessionId:D,content:p.trim(),authorName:u.trim()||"Anonymous"}});(i=a==null?void 0:a.data)!=null&&i.success&&(a.data.comment&&B(n=>[...n,a.data.comment]),g(""),m&&m())}catch(a){console.error("Failed to submit comment:",a),alert("Failed to submit comment. Please try again.")}finally{d(!1)}}},w=s=>{const i=new Date(s),n=Math.abs(new Date().getTime()-i.getTime()),x=Math.ceil(n/(1e3*60)),l=Math.ceil(n/(1e3*60*60)),o=Math.ceil(n/(1e3*60*60*24));return x<60?`${x}m ago`:l<24?`${l}h ago`:o<7?`${o}d ago`:i.toLocaleDateString()};return C?t.jsx("div",{className:"space-y-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:138:6","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"138","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[...Array(3)].map((s,i)=>t.jsx(N,{className:"animate-pulse","data-matrix-id":"src/components/stories/CommentSystem.tsx:140:10","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"140","data-component-file":"CommentSystem.tsx","data-component-name":"Card","data-component-content":"%7B%22className%22%3A%22animate-pulse%22%7D",children:t.jsx(A,{className:"p-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:141:12","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"141","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:t.jsxs("div",{className:"flex items-start space-x-3","data-matrix-id":"src/components/stories/CommentSystem.tsx:142:14","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"142","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20space-x-3%22%7D",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full","data-matrix-id":"src/components/stories/CommentSystem.tsx:143:16","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"143","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20bg-gray-200%20rounded-full%22%7D"}),t.jsxs("div",{className:"flex-1 space-y-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:144:16","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"144","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20space-y-2%22%7D",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4","data-matrix-id":"src/components/stories/CommentSystem.tsx:145:18","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"145","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-4%20bg-gray-200%20rounded%20w-1%2F4%22%7D"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4","data-matrix-id":"src/components/stories/CommentSystem.tsx:146:18","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"146","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-4%20bg-gray-200%20rounded%20w-3%2F4%22%7D"})]})]})})},i))}):t.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/stories/CommentSystem.tsx:157:4","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"157","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[t.jsx(N,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:159:6","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"159","data-component-file":"CommentSystem.tsx","data-component-name":"Card",children:t.jsx(A,{className:"p-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:160:8","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"160","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:t.jsxs("form",{onSubmit:M,className:"space-y-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:161:10","data-matrix-name":"form","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"161","data-component-file":"CommentSystem.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[!c&&t.jsxs("div",{"data-matrix-id":"src/components/stories/CommentSystem.tsx:163:14","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"163","data-component-file":"CommentSystem.tsx","data-component-name":"div",children:[t.jsx("label",{className:"block text-sm font-medium text-foreground mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:164:16","data-matrix-name":"label","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"164","data-component-file":"CommentSystem.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-foreground%20mb-2%22%7D",children:"Your Name"}),t.jsx("input",{type:"text",value:u,onChange:s=>_(s.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",placeholder:"Enter your name...",required:!c,"data-matrix-id":"src/components/stories/CommentSystem.tsx:167:16","data-matrix-name":"input","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"167","data-component-file":"CommentSystem.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-3%20py-2%20border%20border-border%20rounded-lg%20focus%3Aring-2%20focus%3Aring-primary-500%20focus%3Aborder-transparent%20bg-background%20text-foreground%22%2C%22placeholder%22%3A%22Enter%20your%20name...%22%2C%22required%22%3A%22%5BUnaryExpression%5D%22%7D"})]}),t.jsxs("div",{"data-matrix-id":"src/components/stories/CommentSystem.tsx:178:12","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"178","data-component-file":"CommentSystem.tsx","data-component-name":"div",children:[t.jsx("label",{className:"block text-sm font-medium text-foreground mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:179:14","data-matrix-name":"label","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"179","data-component-file":"CommentSystem.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-foreground%20mb-2%22%7D",children:"Add a comment"}),t.jsx("textarea",{"data-comment-input":!0,value:p,onChange:s=>g(s.target.value),rows:3,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none bg-background text-foreground",placeholder:"Share your thoughts...",required:!0,"data-matrix-id":"src/components/stories/CommentSystem.tsx:182:14","data-matrix-name":"textarea","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"182","data-component-file":"CommentSystem.tsx","data-component-name":"textarea","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22rows%22%3A3%2C%22className%22%3A%22w-full%20px-3%20py-2%20border%20border-border%20rounded-lg%20focus%3Aring-2%20focus%3Aring-primary-500%20focus%3Aborder-transparent%20resize-none%20bg-background%20text-foreground%22%2C%22placeholder%22%3A%22Share%20your%20thoughts...%22%2C%22required%22%3Atrue%7D"})]}),t.jsx("div",{className:"flex justify-end","data-matrix-id":"src/components/stories/CommentSystem.tsx:193:12","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"193","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20justify-end%22%7D",children:t.jsxs(k,{type:"submit",disabled:f||!p.trim()||!c&&!u.trim(),className:"flex items-center gap-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:194:14","data-matrix-name":"Button","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"194","data-component-file":"CommentSystem.tsx","data-component-name":"Button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[f?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent","data-matrix-id":"src/components/stories/CommentSystem.tsx:200:18","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"200","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-4%20w-4%20border-2%20border-white%20border-t-transparent%22%7D"}):t.jsx(K,{className:"w-4 h-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:202:18","data-matrix-name":"Send","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"202","data-component-file":"CommentSystem.tsx","data-component-name":"Send","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),f?"Posting...":"Post Comment"]})})]})})}),t.jsx("div",{className:"space-y-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:212:6","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"212","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:t.jsx(O,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:213:8","data-matrix-name":"AnimatePresence","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"213","data-component-file":"CommentSystem.tsx","data-component-name":"AnimatePresence",children:S.length===0?t.jsx(N,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:215:12","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"215","data-component-file":"CommentSystem.tsx","data-component-name":"Card",children:t.jsxs(A,{className:"p-8 text-center","data-matrix-id":"src/components/stories/CommentSystem.tsx:216:14","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"216","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-8%20text-center%22%7D",children:[t.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:217:16","data-matrix-name":"MessageSquare","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"217","data-component-file":"CommentSystem.tsx","data-component-name":"MessageSquare","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-gray-400%20mx-auto%20mb-4%22%7D"}),t.jsx("h3",{className:"text-lg font-medium text-foreground mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:218:16","data-matrix-name":"h3","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"218","data-component-file":"CommentSystem.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-medium%20text-foreground%20mb-2%22%7D",children:"No comments yet"}),t.jsx("p",{className:"text-foreground-secondary","data-matrix-id":"src/components/stories/CommentSystem.tsx:221:16","data-matrix-name":"p","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"221","data-component-file":"CommentSystem.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-foreground-secondary%22%7D",children:"Be the first to share your thoughts!"})]})}):S.map(s=>t.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t.jsx(N,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:235:16","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"235","data-component-file":"CommentSystem.tsx","data-component-name":"Card",children:t.jsx(A,{className:"p-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:236:18","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"236","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:t.jsxs("div",{className:"flex items-start space-x-3","data-matrix-id":"src/components/stories/CommentSystem.tsx:237:20","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"237","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20space-x-3%22%7D",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/stories/CommentSystem.tsx:238:22","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"238","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20bg-gradient-to-br%20from-primary-400%20to-primary-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:t.jsx(P,{className:"w-4 h-4 text-white","data-matrix-id":"src/components/stories/CommentSystem.tsx:239:24","data-matrix-name":"User","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"239","data-component-file":"CommentSystem.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-white%22%7D"})}),t.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/stories/CommentSystem.tsx:242:22","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"242","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:243:24","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"243","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-2%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:244:26","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"244","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[t.jsx("span",{className:"font-medium text-foreground","data-matrix-id":"src/components/stories/CommentSystem.tsx:245:28","data-matrix-name":"span","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"245","data-component-file":"CommentSystem.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%20text-foreground%22%7D",children:s.author_name}),s.user_id&&t.jsx(U,{variant:"secondary",className:"text-xs","data-matrix-id":"src/components/stories/CommentSystem.tsx:249:30","data-matrix-name":"Badge","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"249","data-component-file":"CommentSystem.tsx","data-component-name":"Badge","data-component-content":"%7B%22variant%22%3A%22secondary%22%2C%22className%22%3A%22text-xs%22%7D",children:"Member"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground-secondary","data-matrix-id":"src/components/stories/CommentSystem.tsx:255:26","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"255","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-sm%20text-foreground-secondary%22%7D",children:[t.jsx(z,{className:"w-3 h-3","data-matrix-id":"src/components/stories/CommentSystem.tsx:256:28","data-matrix-name":"Calendar","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"256","data-component-file":"CommentSystem.tsx","data-component-name":"Calendar","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%22%7D"}),t.jsx("span",{"data-matrix-id":"src/components/stories/CommentSystem.tsx:257:28","data-matrix-name":"span","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"257","data-component-file":"CommentSystem.tsx","data-component-name":"span",children:w(s.created_at)})]})]}),t.jsx("p",{className:"text-foreground leading-relaxed","data-matrix-id":"src/components/stories/CommentSystem.tsx:261:24","data-matrix-name":"p","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"261","data-component-file":"CommentSystem.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-foreground%20leading-relaxed%22%7D",children:s.content})]})]})})})},s.id))})})]})}function lt(){var s,i;const{id:y}=H(),c=V(),{t:D}=F(),{user:m}=G(),[e,S]=r.useState(null),[B,C]=r.useState(!0),[v,f]=r.useState(null),[d,p]=r.useState({hasLiked:!1,hasSaved:!1}),[g]=r.useState(()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`);r.useEffect(()=>{if(!y){f("Story ID is required"),C(!1);return}u()},[y]),r.useEffect(()=>{e&&(_(),I())},[e,m]);const u=async()=>{try{C(!0),f(null);const{data:a,error:n}=await h.from("stories").select(`
          *,
          profiles:author_id (
            full_name,
            username,
            avatar_url
          )
        `).eq("id",y).eq("status","published").eq("is_public",!0).maybeSingle();if(n)throw n;if(!a){f("Story not found");return}const{data:x}=await h.from("story_tags").select(`
          tags!inner(id, name)
        `).eq("story_id",y),l=(x==null?void 0:x.map(o=>({id:o.tags.id,name:o.tags.name,display_name:o.tags.name,color:"#3B82F6"})))||[];S({...a,tags:l})}catch(a){console.error("Failed to fetch story:",a),f(a.message||"Failed to load story")}finally{C(!1)}},_=async()=>{if(e)try{const{data:a}=await h.functions.invoke("social-interactions",{body:{action:"get_interactions",storyId:e.id,userId:m==null?void 0:m.id,sessionId:g}});a!=null&&a.data&&p(a.data)}catch(a){console.error("Failed to fetch user interactions:",a)}},I=async()=>{if(e)try{const a=`story_viewed_${e.id}`;if(sessionStorage.getItem(a))return;await h.from("stories").update({view_count:(e.view_count||0)+1}).eq("id",e.id),sessionStorage.setItem(a,"true"),S(n=>n?{...n,view_count:(n.view_count||0)+1}:null)}catch(a){console.error("Failed to increment view count:",a)}},b=async(a,n)=>{var x;if(e)try{const{data:l}=await h.functions.invoke("social-interactions",{body:{action:a,storyId:e.id,userId:m==null?void 0:m.id,sessionId:g,platform:n}});(x=l==null?void 0:l.data)!=null&&x.success&&(a==="like"?(p(o=>({...o,hasLiked:!0})),S(o=>o?{...o,like_count:(o.like_count||0)+1}:null)):a==="unlike"?(p(o=>({...o,hasLiked:!1})),S(o=>o?{...o,like_count:Math.max(0,(o.like_count||0)-1)}:null)):a==="save"?p(o=>({...o,hasSaved:!0})):a==="unsave"&&p(o=>({...o,hasSaved:!1})))}catch(l){console.error(`Failed to ${a} story:`,l)}},E=async()=>{const a=window.location.href;if(navigator.share)try{await navigator.share({title:e==null?void 0:e.title,text:e==null?void 0:e.excerpt,url:a}),b("share","native")}catch{}else try{await navigator.clipboard.writeText(a),b("share","clipboard")}catch(n){console.error("Failed to copy URL:",n)}},M=a=>new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),w=()=>{window.history.length>1?c(-1):c("/stories")};return B?t.jsx("div",{className:"flex items-center justify-center min-h-screen","data-matrix-id":"src/pages/StoryDetail.tsx:276:6","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"276","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20min-h-screen%22%7D",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600","data-matrix-id":"src/pages/StoryDetail.tsx:277:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"277","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-8%20w-8%20border-b-2%20border-primary-600%22%7D"})}):v||!e?t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8","data-matrix-id":"src/pages/StoryDetail.tsx:284:6","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"284","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-4xl%20mx-auto%20px-4%20py-8%22%7D",children:t.jsx(N,{className:"border-red-200 bg-red-50","data-matrix-id":"src/pages/StoryDetail.tsx:285:8","data-matrix-name":"Card","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"285","data-component-file":"StoryDetail.tsx","data-component-name":"Card","data-component-content":"%7B%22className%22%3A%22border-red-200%20bg-red-50%22%7D",children:t.jsx(A,{className:"p-6","data-matrix-id":"src/pages/StoryDetail.tsx:286:10","data-matrix-name":"CardContent","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"286","data-component-file":"StoryDetail.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-6%22%7D",children:t.jsxs("div",{className:"text-center","data-matrix-id":"src/pages/StoryDetail.tsx:287:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"287","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[t.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2","data-matrix-id":"src/pages/StoryDetail.tsx:288:14","data-matrix-name":"h2","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"288","data-component-file":"StoryDetail.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-red-800%20mb-2%22%7D",children:v||"Story not found"}),t.jsx("p",{className:"text-red-600 mb-4","data-matrix-id":"src/pages/StoryDetail.tsx:291:14","data-matrix-name":"p","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"291","data-component-file":"StoryDetail.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-red-600%20mb-4%22%7D",children:"The story you're looking for might have been moved or deleted."}),t.jsxs(k,{onClick:w,variant:"outline","data-matrix-id":"src/pages/StoryDetail.tsx:294:14","data-matrix-name":"Button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"294","data-component-file":"StoryDetail.tsx","data-component-name":"Button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22variant%22%3A%22outline%22%7D",children:[t.jsx(L,{className:"w-4 h-4 mr-2","data-matrix-id":"src/pages/StoryDetail.tsx:295:16","data-matrix-name":"ArrowLeft","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"295","data-component-file":"StoryDetail.tsx","data-component-name":"ArrowLeft","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20mr-2%22%7D"}),"Go Back"]})]})})})}):t.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-4xl mx-auto px-4 py-8",children:[t.jsx("div",{className:"mb-6","data-matrix-id":"src/pages/StoryDetail.tsx:313:6","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"313","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:t.jsxs(k,{onClick:w,variant:"ghost",className:"mb-4","data-matrix-id":"src/pages/StoryDetail.tsx:314:8","data-matrix-name":"Button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"314","data-component-file":"StoryDetail.tsx","data-component-name":"Button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22variant%22%3A%22ghost%22%2C%22className%22%3A%22mb-4%22%7D",children:[t.jsx(L,{className:"w-4 h-4 mr-2","data-matrix-id":"src/pages/StoryDetail.tsx:319:10","data-matrix-name":"ArrowLeft","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"319","data-component-file":"StoryDetail.tsx","data-component-name":"ArrowLeft","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20mr-2%22%7D"}),D("common.back","Back")]})}),t.jsxs("article",{className:"space-y-6","data-matrix-id":"src/pages/StoryDetail.tsx:325:6","data-matrix-name":"article","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"325","data-component-file":"StoryDetail.tsx","data-component-name":"article","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[e.featured_image_url&&t.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-xl","data-matrix-id":"src/pages/StoryDetail.tsx:328:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"328","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22aspect-video%20w-full%20overflow-hidden%20rounded-xl%22%7D",children:t.jsx("img",{src:e.featured_image_url,alt:e.title,className:"w-full h-full object-cover",onError:a=>{const n=a.target;n.src=`/story-images/story-${Math.floor(Math.random()*8)+1}.jpg`},"data-matrix-id":"src/pages/StoryDetail.tsx:329:12","data-matrix-name":"img","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"329","data-component-file":"StoryDetail.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22w-full%20h-full%20object-cover%22%2C%22onError%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})}),t.jsxs("div",{className:"space-y-4","data-matrix-id":"src/pages/StoryDetail.tsx:342:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"342","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground leading-tight","data-matrix-id":"src/pages/StoryDetail.tsx:343:10","data-matrix-name":"h1","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"343","data-component-file":"StoryDetail.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-3xl%20md%3Atext-4xl%20font-bold%20text-foreground%20leading-tight%22%7D",children:e.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-foreground-secondary","data-matrix-id":"src/pages/StoryDetail.tsx:348:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"348","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20items-center%20gap-4%20text-sm%20text-foreground-secondary%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:349:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"349","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(P,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:350:14","data-matrix-name":"User","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"350","data-component-file":"StoryDetail.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:351:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"351","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:((s=e.profiles)==null?void 0:s.full_name)||((i=e.profiles)==null?void 0:i.username)||e.publisher||"LeiaoAI Agent"})]}),t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:353:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"353","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(z,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:354:14","data-matrix-name":"Calendar","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"354","data-component-file":"StoryDetail.tsx","data-component-name":"Calendar","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsxs("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:355:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"355","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:[M(e.published_at||e.created_at),e.updated_at&&e.updated_at!==e.created_at&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground","data-matrix-id":"src/pages/StoryDetail.tsx:358:18","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"358","data-component-file":"StoryDetail.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22ml-2%20text-xs%20text-muted-foreground%22%7D",children:["(",D("story.edited","edited"),")"]})]})]}),t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:364:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"364","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(R,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:365:14","data-matrix-name":"Clock","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"365","data-component-file":"StoryDetail.tsx","data-component-name":"Clock","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsxs("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:366:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"366","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:[e.read_time_minutes||5," min read"]})]}),t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:368:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"368","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(J,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:369:14","data-matrix-name":"Eye","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"369","data-component-file":"StoryDetail.tsx","data-component-name":"Eye","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsxs("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:370:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"370","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:[(e.view_count||0).toLocaleString()," views"]})]}),e.location&&t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:373:14","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"373","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(Q,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:374:16","data-matrix-name":"MapPin","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"374","data-component-file":"StoryDetail.tsx","data-component-name":"MapPin","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:375:16","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"375","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:e.location})]})]}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2","data-matrix-id":"src/pages/StoryDetail.tsx:382:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"382","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20gap-2%22%7D",children:e.tags.map(a=>t.jsx(U,{variant:"outline",style:{borderColor:a.color,color:a.color},"data-matrix-id":"src/pages/StoryDetail.tsx:384:16","data-matrix-name":"Badge","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"384","data-component-file":"StoryDetail.tsx","data-component-name":"Badge","data-component-content":"%7B%22variant%22%3A%22outline%22%2C%22style%22%3A%7B%22borderColor%22%3A%22%5BMemberExpression%5D%22%2C%22color%22%3A%22%5BMemberExpression%5D%22%7D%7D",children:a.display_name},a.id))})]}),t.jsxs("div",{className:"flex items-center justify-between py-4 border-y border-border","data-matrix-id":"src/pages/StoryDetail.tsx:400:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"400","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20py-4%20border-y%20border-border%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-4","data-matrix-id":"src/pages/StoryDetail.tsx:401:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"401","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D",children:[t.jsxs("button",{onClick:()=>b(d.hasLiked?"unlike":"like"),className:j("flex items-center gap-2 px-3 py-1.5 rounded-full transition-colors",d.hasLiked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),"data-matrix-id":"src/pages/StoryDetail.tsx:402:12","data-matrix-name":"button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"402","data-component-file":"StoryDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BCallExpression%5D%22%7D",children:[t.jsx(Y,{className:j("w-4 h-4",d.hasLiked&&"fill-current"),"data-matrix-id":"src/pages/StoryDetail.tsx:411:14","data-matrix-name":"Heart","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"411","data-component-file":"StoryDetail.tsx","data-component-name":"Heart","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:412:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"412","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:(e.like_count||0).toLocaleString()})]}),t.jsxs("button",{onClick:()=>b(d.hasSaved?"unsave":"save"),className:j("flex items-center gap-2 px-3 py-1.5 rounded-full transition-colors",d.hasSaved?"bg-blue-100 text-blue-600 hover:bg-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),"data-matrix-id":"src/pages/StoryDetail.tsx:415:12","data-matrix-name":"button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"415","data-component-file":"StoryDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BCallExpression%5D%22%7D",children:[t.jsx(X,{className:j("w-4 h-4",d.hasSaved&&"fill-current"),"data-matrix-id":"src/pages/StoryDetail.tsx:424:14","data-matrix-name":"Bookmark","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"424","data-component-file":"StoryDetail.tsx","data-component-name":"Bookmark","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:425:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"425","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:d.hasSaved?"Saved":"Save"})]}),t.jsxs("button",{onClick:()=>{const a=document.getElementById("comments-section");a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{const n=document.querySelector("[data-comment-input]");n&&n.focus()},500))},className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors cursor-pointer","data-matrix-id":"src/pages/StoryDetail.tsx:428:12","data-matrix-name":"button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"428","data-component-file":"StoryDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex%20items-center%20gap-2%20px-3%20py-1.5%20rounded-full%20bg-gray-100%20text-gray-600%20hover%3Abg-gray-200%20transition-colors%20cursor-pointer%22%7D",children:[t.jsx($,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:442:14","data-matrix-name":"MessageSquare","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"442","data-component-file":"StoryDetail.tsx","data-component-name":"MessageSquare","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:443:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"443","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:(e.comment_count||0).toLocaleString()})]})]}),t.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors","data-matrix-id":"src/pages/StoryDetail.tsx:447:10","data-matrix-name":"button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"447","data-component-file":"StoryDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex%20items-center%20gap-2%20px-3%20py-1.5%20rounded-full%20bg-gray-100%20text-gray-600%20hover%3Abg-gray-200%20transition-colors%22%7D",children:[t.jsx(Z,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:451:12","data-matrix-name":"Share2","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"451","data-component-file":"StoryDetail.tsx","data-component-name":"Share2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:452:12","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"452","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:"Share"})]})]}),m&&e.author_id===m.id&&t.jsx("div",{className:"flex justify-end mb-4","data-matrix-id":"src/pages/StoryDetail.tsx:458:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"458","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20justify-end%20mb-4%22%7D",children:t.jsxs(k,{onClick:()=>c(`/edit-story/${e.id}`),variant:"outline",className:"flex items-center gap-2","data-matrix-id":"src/pages/StoryDetail.tsx:459:12","data-matrix-name":"Button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"459","data-component-file":"StoryDetail.tsx","data-component-name":"Button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22variant%22%3A%22outline%22%2C%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[t.jsx(W,{size:16,"data-matrix-id":"src/pages/StoryDetail.tsx:464:14","data-matrix-name":"Edit","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"464","data-component-file":"StoryDetail.tsx","data-component-name":"Edit","data-component-content":"%7B%22size%22%3A16%7D"}),D("story.edit","Edit Story")]})}),t.jsx("div",{className:"prose prose-lg max-w-none","data-matrix-id":"src/pages/StoryDetail.tsx:471:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"471","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22prose%20prose-lg%20max-w-none%22%7D",children:t.jsx("div",{className:"whitespace-pre-wrap text-foreground leading-relaxed","data-matrix-id":"src/pages/StoryDetail.tsx:472:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"472","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22whitespace-pre-wrap%20text-foreground%20leading-relaxed%22%7D",children:e.content})}),t.jsxs("div",{id:"comments-section",className:"mt-12 pt-8 border-t border-border","data-matrix-id":"src/pages/StoryDetail.tsx:478:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"478","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22id%22%3A%22comments-section%22%2C%22className%22%3A%22mt-12%20pt-8%20border-t%20border-border%22%7D",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-6","data-matrix-id":"src/pages/StoryDetail.tsx:479:10","data-matrix-name":"h3","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"479","data-component-file":"StoryDetail.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20mb-6%22%7D",children:["Comments (",e.comment_count||0,")"]}),t.jsx(tt,{storyId:e.id,userId:m==null?void 0:m.id,sessionId:g,onCommentAdded:()=>{S(a=>a?{...a,comment_count:(a.comment_count||0)+1}:null)},"data-matrix-id":"src/pages/StoryDetail.tsx:480:10","data-matrix-name":"CommentSystem","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"480","data-component-file":"StoryDetail.tsx","data-component-name":"CommentSystem","data-component-content":"%7B%22storyId%22%3A%22%5BMemberExpression%5D%22%2C%22userId%22%3A%22%5BOptionalMemberExpression%5D%22%2C%22sessionId%22%3A%22%5BIdentifier%5D%22%2C%22onCommentAdded%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})]})]})]})}export{lt as default};
