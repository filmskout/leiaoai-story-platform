import{c as q,u as F,r as m,s as S,j as t,h as _,U as P,x as z,b as G,n as R,y as V,d as A}from"./index-lJi5ZKDq.js";import{C,a as v}from"./card-CRasAVB0.js";import{B as U}from"./badge-D4z_qhnW.js";import{S as K}from"./send-CR2Zmb7D.js";import{A as O}from"./index-mq_NGW6e.js";import{M as $}from"./message-square-Cijv-ywW.js";import{m as T}from"./proxy-CQByrZHI.js";import{C as H,H as Y}from"./heart-PcmS-L6k.js";import{A as I}from"./arrow-left-DKPMiITx.js";import{E as J}from"./eye-CgMDpV-8.js";import{M as Q}from"./map-pin-C_dl3IXT.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=q("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=q("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function Z({storyId:l,userId:p,sessionId:B,onCommentAdded:r}){const{t:e}=F(),[x,N]=m.useState([]),[g,u]=m.useState(!0),[y,i]=m.useState(!1),[d,f]=m.useState(""),[h,w]=m.useState(""),[E,D]=m.useState(!p);m.useEffect(()=>{j()},[l]);const j=async()=>{try{u(!0);const{data:a,error:n}=await S.from("story_comments").select("*").eq("story_id",l).order("created_at",{ascending:!0});if(n)throw n;N(a||[])}catch(a){console.error("Failed to fetch comments:",a)}finally{u(!1)}},k=async a=>{var n;if(a.preventDefault(),!!d.trim()){if(!p&&!h.trim()){alert("Please enter your name");return}try{i(!0);const{data:s}=await S.functions.invoke("story-interactions",{body:{action:"comment",storyId:l,userId:p,sessionId:B,content:d.trim(),authorName:h.trim()||"Anonymous"}});(n=s==null?void 0:s.data)!=null&&n.success&&(s.data.comment&&N(c=>[...c,s.data.comment]),f(""),r&&r())}catch(s){console.error("Failed to submit comment:",s),alert("Failed to submit comment. Please try again.")}finally{i(!1)}}},b=a=>{const n=new Date(a),c=Math.abs(new Date().getTime()-n.getTime()),o=Math.ceil(c/(1e3*60)),M=Math.ceil(c/(1e3*60*60)),L=Math.ceil(c/(1e3*60*60*24));return o<60?`${o}m ago`:M<24?`${M}h ago`:L<7?`${L}d ago`:n.toLocaleDateString()};return g?t.jsx("div",{className:"space-y-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:138:6","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"138","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[...Array(3)].map((a,n)=>t.jsx(C,{className:"animate-pulse","data-matrix-id":"src/components/stories/CommentSystem.tsx:140:10","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"140","data-component-file":"CommentSystem.tsx","data-component-name":"Card","data-component-content":"%7B%22className%22%3A%22animate-pulse%22%7D",children:t.jsx(v,{className:"p-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:141:12","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"141","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:t.jsxs("div",{className:"flex items-start space-x-3","data-matrix-id":"src/components/stories/CommentSystem.tsx:142:14","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"142","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20space-x-3%22%7D",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full","data-matrix-id":"src/components/stories/CommentSystem.tsx:143:16","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"143","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20bg-gray-200%20rounded-full%22%7D"}),t.jsxs("div",{className:"flex-1 space-y-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:144:16","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"144","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20space-y-2%22%7D",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4","data-matrix-id":"src/components/stories/CommentSystem.tsx:145:18","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"145","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-4%20bg-gray-200%20rounded%20w-1%2F4%22%7D"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4","data-matrix-id":"src/components/stories/CommentSystem.tsx:146:18","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"146","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-4%20bg-gray-200%20rounded%20w-3%2F4%22%7D"})]})]})})},n))}):t.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/stories/CommentSystem.tsx:157:4","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"157","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[t.jsx(C,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:159:6","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"159","data-component-file":"CommentSystem.tsx","data-component-name":"Card",children:t.jsx(v,{className:"p-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:160:8","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"160","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:t.jsxs("form",{onSubmit:k,className:"space-y-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:161:10","data-matrix-name":"form","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"161","data-component-file":"CommentSystem.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[!p&&t.jsxs("div",{"data-matrix-id":"src/components/stories/CommentSystem.tsx:163:14","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"163","data-component-file":"CommentSystem.tsx","data-component-name":"div",children:[t.jsx("label",{className:"block text-sm font-medium text-foreground mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:164:16","data-matrix-name":"label","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"164","data-component-file":"CommentSystem.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-foreground%20mb-2%22%7D",children:"Your Name"}),t.jsx("input",{type:"text",value:h,onChange:a=>w(a.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",placeholder:"Enter your name...",required:!p,"data-matrix-id":"src/components/stories/CommentSystem.tsx:167:16","data-matrix-name":"input","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"167","data-component-file":"CommentSystem.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-3%20py-2%20border%20border-border%20rounded-lg%20focus%3Aring-2%20focus%3Aring-primary-500%20focus%3Aborder-transparent%20bg-background%20text-foreground%22%2C%22placeholder%22%3A%22Enter%20your%20name...%22%2C%22required%22%3A%22%5BUnaryExpression%5D%22%7D"})]}),t.jsxs("div",{"data-matrix-id":"src/components/stories/CommentSystem.tsx:178:12","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"178","data-component-file":"CommentSystem.tsx","data-component-name":"div",children:[t.jsx("label",{className:"block text-sm font-medium text-foreground mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:179:14","data-matrix-name":"label","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"179","data-component-file":"CommentSystem.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-foreground%20mb-2%22%7D",children:"Add a comment"}),t.jsx("textarea",{value:d,onChange:a=>f(a.target.value),rows:3,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none bg-background text-foreground",placeholder:"Share your thoughts...",required:!0,"data-matrix-id":"src/components/stories/CommentSystem.tsx:182:14","data-matrix-name":"textarea","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"182","data-component-file":"CommentSystem.tsx","data-component-name":"textarea","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22rows%22%3A3%2C%22className%22%3A%22w-full%20px-3%20py-2%20border%20border-border%20rounded-lg%20focus%3Aring-2%20focus%3Aring-primary-500%20focus%3Aborder-transparent%20resize-none%20bg-background%20text-foreground%22%2C%22placeholder%22%3A%22Share%20your%20thoughts...%22%2C%22required%22%3Atrue%7D"})]}),t.jsx("div",{className:"flex justify-end","data-matrix-id":"src/components/stories/CommentSystem.tsx:192:12","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"192","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20justify-end%22%7D",children:t.jsxs(_,{type:"submit",disabled:y||!d.trim()||!p&&!h.trim(),className:"flex items-center gap-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:193:14","data-matrix-name":"Button","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"193","data-component-file":"CommentSystem.tsx","data-component-name":"Button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[y?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent","data-matrix-id":"src/components/stories/CommentSystem.tsx:199:18","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"199","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-4%20w-4%20border-2%20border-white%20border-t-transparent%22%7D"}):t.jsx(K,{className:"w-4 h-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:201:18","data-matrix-name":"Send","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"201","data-component-file":"CommentSystem.tsx","data-component-name":"Send","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),y?"Posting...":"Post Comment"]})})]})})}),t.jsx("div",{className:"space-y-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:211:6","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"211","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:t.jsx(O,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:212:8","data-matrix-name":"AnimatePresence","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"212","data-component-file":"CommentSystem.tsx","data-component-name":"AnimatePresence",children:x.length===0?t.jsx(C,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:214:12","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"214","data-component-file":"CommentSystem.tsx","data-component-name":"Card",children:t.jsxs(v,{className:"p-8 text-center","data-matrix-id":"src/components/stories/CommentSystem.tsx:215:14","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"215","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-8%20text-center%22%7D",children:[t.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:216:16","data-matrix-name":"MessageSquare","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"216","data-component-file":"CommentSystem.tsx","data-component-name":"MessageSquare","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-gray-400%20mx-auto%20mb-4%22%7D"}),t.jsx("h3",{className:"text-lg font-medium text-foreground mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:217:16","data-matrix-name":"h3","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"217","data-component-file":"CommentSystem.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-medium%20text-foreground%20mb-2%22%7D",children:"No comments yet"}),t.jsx("p",{className:"text-foreground-secondary","data-matrix-id":"src/components/stories/CommentSystem.tsx:220:16","data-matrix-name":"p","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"220","data-component-file":"CommentSystem.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-foreground-secondary%22%7D",children:"Be the first to share your thoughts!"})]})}):x.map(a=>t.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t.jsx(C,{"data-matrix-id":"src/components/stories/CommentSystem.tsx:234:16","data-matrix-name":"Card","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"234","data-component-file":"CommentSystem.tsx","data-component-name":"Card",children:t.jsx(v,{className:"p-4","data-matrix-id":"src/components/stories/CommentSystem.tsx:235:18","data-matrix-name":"CardContent","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"235","data-component-file":"CommentSystem.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:t.jsxs("div",{className:"flex items-start space-x-3","data-matrix-id":"src/components/stories/CommentSystem.tsx:236:20","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"236","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20space-x-3%22%7D",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/stories/CommentSystem.tsx:237:22","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"237","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20bg-gradient-to-br%20from-primary-400%20to-primary-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:t.jsx(P,{className:"w-4 h-4 text-white","data-matrix-id":"src/components/stories/CommentSystem.tsx:238:24","data-matrix-name":"User","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"238","data-component-file":"CommentSystem.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-white%22%7D"})}),t.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/stories/CommentSystem.tsx:241:22","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"241","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:242:24","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"242","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-2%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/stories/CommentSystem.tsx:243:26","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"243","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[t.jsx("span",{className:"font-medium text-foreground","data-matrix-id":"src/components/stories/CommentSystem.tsx:244:28","data-matrix-name":"span","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"244","data-component-file":"CommentSystem.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%20text-foreground%22%7D",children:a.author_name}),a.user_id&&t.jsx(U,{variant:"secondary",className:"text-xs","data-matrix-id":"src/components/stories/CommentSystem.tsx:248:30","data-matrix-name":"Badge","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"248","data-component-file":"CommentSystem.tsx","data-component-name":"Badge","data-component-content":"%7B%22variant%22%3A%22secondary%22%2C%22className%22%3A%22text-xs%22%7D",children:"Member"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground-secondary","data-matrix-id":"src/components/stories/CommentSystem.tsx:254:26","data-matrix-name":"div","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"254","data-component-file":"CommentSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-sm%20text-foreground-secondary%22%7D",children:[t.jsx(H,{className:"w-3 h-3","data-matrix-id":"src/components/stories/CommentSystem.tsx:255:28","data-matrix-name":"Calendar","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"255","data-component-file":"CommentSystem.tsx","data-component-name":"Calendar","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%22%7D"}),t.jsx("span",{"data-matrix-id":"src/components/stories/CommentSystem.tsx:256:28","data-matrix-name":"span","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"256","data-component-file":"CommentSystem.tsx","data-component-name":"span",children:b(a.created_at)})]})]}),t.jsx("p",{className:"text-foreground leading-relaxed","data-matrix-id":"src/components/stories/CommentSystem.tsx:260:24","data-matrix-name":"p","data-component-path":"src/components/stories/CommentSystem.tsx","data-component-line":"260","data-component-file":"CommentSystem.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-foreground%20leading-relaxed%22%7D",children:a.content})]})]})})})},a.id))})})]})}function pt(){const{id:l}=z(),p=G(),{t:B}=F(),{user:r}=R(),[e,x]=m.useState(null),[N,g]=m.useState(!0),[u,y]=m.useState(null),[i,d]=m.useState({hasLiked:!1,hasSaved:!1}),[f]=m.useState(()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`);m.useEffect(()=>{if(!l){y("Story ID is required"),g(!1);return}h()},[l]),m.useEffect(()=>{e&&(w(),E())},[e,r]);const h=async()=>{try{g(!0),y(null);const{data:a,error:n}=await S.from("stories").select("*").eq("id",l).eq("status","published").eq("is_public",!0).maybeSingle();if(n)throw n;if(!a){y("Story not found");return}const{data:s}=await S.from("story_tags").select(`
          tags!inner(id, name)
        `).eq("story_id",l),c=(s==null?void 0:s.map(o=>({id:o.tags.id,name:o.tags.name,display_name:o.tags.name,color:"#3B82F6"})))||[];x({...a,tags:c})}catch(a){console.error("Failed to fetch story:",a),y(a.message||"Failed to load story")}finally{g(!1)}},w=async()=>{if(e)try{const{data:a}=await S.functions.invoke("social-interactions",{body:{action:"get_interactions",storyId:e.id,userId:r==null?void 0:r.id,sessionId:f}});a!=null&&a.data&&d(a.data)}catch(a){console.error("Failed to fetch user interactions:",a)}},E=async()=>{if(e)try{const a=`story_viewed_${e.id}`;if(sessionStorage.getItem(a))return;await S.from("stories").update({view_count:(e.view_count||0)+1}).eq("id",e.id),sessionStorage.setItem(a,"true"),x(n=>n?{...n,view_count:(n.view_count||0)+1}:null)}catch(a){console.error("Failed to increment view count:",a)}},D=async(a,n)=>{var s;if(e)try{const{data:c}=await S.functions.invoke("social-interactions",{body:{action:a,storyId:e.id,userId:r==null?void 0:r.id,sessionId:f,platform:n}});(s=c==null?void 0:c.data)!=null&&s.success&&(a==="like"?(d(o=>({...o,hasLiked:!0})),x(o=>o?{...o,like_count:(o.like_count||0)+1}:null)):a==="unlike"?(d(o=>({...o,hasLiked:!1})),x(o=>o?{...o,like_count:Math.max(0,(o.like_count||0)-1)}:null)):a==="save"?d(o=>({...o,hasSaved:!0})):a==="unsave"&&d(o=>({...o,hasSaved:!1})))}catch(c){console.error(`Failed to ${a} story:`,c)}},j=async()=>{const a=window.location.href;if(navigator.share)try{await navigator.share({title:e==null?void 0:e.title,text:e==null?void 0:e.excerpt,url:a}),D("share","native")}catch{}else try{await navigator.clipboard.writeText(a),D("share","clipboard")}catch(n){console.error("Failed to copy URL:",n)}},k=a=>new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),b=()=>{window.history.length>1?p(-1):p("/stories")};return N?t.jsx("div",{className:"flex items-center justify-center min-h-screen","data-matrix-id":"src/pages/StoryDetail.tsx:263:6","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"263","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20min-h-screen%22%7D",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600","data-matrix-id":"src/pages/StoryDetail.tsx:264:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"264","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-8%20w-8%20border-b-2%20border-primary-600%22%7D"})}):u||!e?t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8","data-matrix-id":"src/pages/StoryDetail.tsx:271:6","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"271","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-4xl%20mx-auto%20px-4%20py-8%22%7D",children:t.jsx(C,{className:"border-red-200 bg-red-50","data-matrix-id":"src/pages/StoryDetail.tsx:272:8","data-matrix-name":"Card","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"272","data-component-file":"StoryDetail.tsx","data-component-name":"Card","data-component-content":"%7B%22className%22%3A%22border-red-200%20bg-red-50%22%7D",children:t.jsx(v,{className:"p-6","data-matrix-id":"src/pages/StoryDetail.tsx:273:10","data-matrix-name":"CardContent","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"273","data-component-file":"StoryDetail.tsx","data-component-name":"CardContent","data-component-content":"%7B%22className%22%3A%22p-6%22%7D",children:t.jsxs("div",{className:"text-center","data-matrix-id":"src/pages/StoryDetail.tsx:274:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"274","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[t.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2","data-matrix-id":"src/pages/StoryDetail.tsx:275:14","data-matrix-name":"h2","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"275","data-component-file":"StoryDetail.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-red-800%20mb-2%22%7D",children:u||"Story not found"}),t.jsx("p",{className:"text-red-600 mb-4","data-matrix-id":"src/pages/StoryDetail.tsx:278:14","data-matrix-name":"p","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"278","data-component-file":"StoryDetail.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-red-600%20mb-4%22%7D",children:"The story you're looking for might have been moved or deleted."}),t.jsxs(_,{onClick:b,variant:"outline","data-matrix-id":"src/pages/StoryDetail.tsx:281:14","data-matrix-name":"Button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"281","data-component-file":"StoryDetail.tsx","data-component-name":"Button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22variant%22%3A%22outline%22%7D",children:[t.jsx(I,{className:"w-4 h-4 mr-2","data-matrix-id":"src/pages/StoryDetail.tsx:282:16","data-matrix-name":"ArrowLeft","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"282","data-component-file":"StoryDetail.tsx","data-component-name":"ArrowLeft","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20mr-2%22%7D"}),"Go Back"]})]})})})}):t.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-4xl mx-auto px-4 py-8",children:[t.jsx("div",{className:"mb-6","data-matrix-id":"src/pages/StoryDetail.tsx:300:6","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"300","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:t.jsxs(_,{onClick:b,variant:"ghost",className:"mb-4","data-matrix-id":"src/pages/StoryDetail.tsx:301:8","data-matrix-name":"Button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"301","data-component-file":"StoryDetail.tsx","data-component-name":"Button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22variant%22%3A%22ghost%22%2C%22className%22%3A%22mb-4%22%7D",children:[t.jsx(I,{className:"w-4 h-4 mr-2","data-matrix-id":"src/pages/StoryDetail.tsx:306:10","data-matrix-name":"ArrowLeft","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"306","data-component-file":"StoryDetail.tsx","data-component-name":"ArrowLeft","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20mr-2%22%7D"}),B("common.back","Back")]})}),t.jsxs("article",{className:"space-y-6","data-matrix-id":"src/pages/StoryDetail.tsx:312:6","data-matrix-name":"article","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"312","data-component-file":"StoryDetail.tsx","data-component-name":"article","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[e.featured_image_url&&t.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-xl","data-matrix-id":"src/pages/StoryDetail.tsx:315:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"315","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22aspect-video%20w-full%20overflow-hidden%20rounded-xl%22%7D",children:t.jsx("img",{src:e.featured_image_url,alt:e.title,className:"w-full h-full object-cover",onError:a=>{const n=a.target;n.src=`/story-images/story-${Math.floor(Math.random()*8)+1}.jpg`},"data-matrix-id":"src/pages/StoryDetail.tsx:316:12","data-matrix-name":"img","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"316","data-component-file":"StoryDetail.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22w-full%20h-full%20object-cover%22%2C%22onError%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})}),t.jsxs("div",{className:"space-y-4","data-matrix-id":"src/pages/StoryDetail.tsx:329:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"329","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground leading-tight","data-matrix-id":"src/pages/StoryDetail.tsx:330:10","data-matrix-name":"h1","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"330","data-component-file":"StoryDetail.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-3xl%20md%3Atext-4xl%20font-bold%20text-foreground%20leading-tight%22%7D",children:e.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-foreground-secondary","data-matrix-id":"src/pages/StoryDetail.tsx:335:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"335","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20items-center%20gap-4%20text-sm%20text-foreground-secondary%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:336:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"336","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(P,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:337:14","data-matrix-name":"User","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"337","data-component-file":"StoryDetail.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:338:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"338","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:e.publisher})]}),t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:340:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"340","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(H,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:341:14","data-matrix-name":"Calendar","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"341","data-component-file":"StoryDetail.tsx","data-component-name":"Calendar","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:342:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"342","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:k(e.published_at||e.created_at)})]}),t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:344:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"344","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(V,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:345:14","data-matrix-name":"Clock","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"345","data-component-file":"StoryDetail.tsx","data-component-name":"Clock","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsxs("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:346:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"346","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:[e.read_time_minutes||5," min read"]})]}),t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:348:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"348","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(J,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:349:14","data-matrix-name":"Eye","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"349","data-component-file":"StoryDetail.tsx","data-component-name":"Eye","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsxs("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:350:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"350","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:[(e.view_count||0).toLocaleString()," views"]})]}),e.location&&t.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/pages/StoryDetail.tsx:353:14","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"353","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[t.jsx(Q,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:354:16","data-matrix-name":"MapPin","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"354","data-component-file":"StoryDetail.tsx","data-component-name":"MapPin","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:355:16","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"355","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:e.location})]})]}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2","data-matrix-id":"src/pages/StoryDetail.tsx:362:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"362","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20gap-2%22%7D",children:e.tags.map(a=>t.jsx(U,{variant:"outline",style:{borderColor:a.color,color:a.color},"data-matrix-id":"src/pages/StoryDetail.tsx:364:16","data-matrix-name":"Badge","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"364","data-component-file":"StoryDetail.tsx","data-component-name":"Badge","data-component-content":"%7B%22variant%22%3A%22outline%22%2C%22style%22%3A%7B%22borderColor%22%3A%22%5BMemberExpression%5D%22%2C%22color%22%3A%22%5BMemberExpression%5D%22%7D%7D",children:a.display_name},a.id))})]}),t.jsxs("div",{className:"flex items-center justify-between py-4 border-y border-border","data-matrix-id":"src/pages/StoryDetail.tsx:380:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"380","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20py-4%20border-y%20border-border%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-4","data-matrix-id":"src/pages/StoryDetail.tsx:381:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"381","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D",children:[t.jsxs("button",{onClick:()=>D(i.hasLiked?"unlike":"like"),className:A("flex items-center gap-2 px-3 py-1.5 rounded-full transition-colors",i.hasLiked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),"data-matrix-id":"src/pages/StoryDetail.tsx:382:12","data-matrix-name":"button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"382","data-component-file":"StoryDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BCallExpression%5D%22%7D",children:[t.jsx(Y,{className:A("w-4 h-4",i.hasLiked&&"fill-current"),"data-matrix-id":"src/pages/StoryDetail.tsx:391:14","data-matrix-name":"Heart","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"391","data-component-file":"StoryDetail.tsx","data-component-name":"Heart","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:392:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"392","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:(e.like_count||0).toLocaleString()})]}),t.jsxs("button",{onClick:()=>D(i.hasSaved?"unsave":"save"),className:A("flex items-center gap-2 px-3 py-1.5 rounded-full transition-colors",i.hasSaved?"bg-blue-100 text-blue-600 hover:bg-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),"data-matrix-id":"src/pages/StoryDetail.tsx:395:12","data-matrix-name":"button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"395","data-component-file":"StoryDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BCallExpression%5D%22%7D",children:[t.jsx(W,{className:A("w-4 h-4",i.hasSaved&&"fill-current"),"data-matrix-id":"src/pages/StoryDetail.tsx:404:14","data-matrix-name":"Bookmark","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"404","data-component-file":"StoryDetail.tsx","data-component-name":"Bookmark","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:405:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"405","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:i.hasSaved?"Saved":"Save"})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-600","data-matrix-id":"src/pages/StoryDetail.tsx:408:12","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"408","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20px-3%20py-1.5%20rounded-full%20bg-gray-100%20text-gray-600%22%7D",children:[t.jsx($,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:409:14","data-matrix-name":"MessageSquare","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"409","data-component-file":"StoryDetail.tsx","data-component-name":"MessageSquare","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:410:14","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"410","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:(e.comment_count||0).toLocaleString()})]})]}),t.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors","data-matrix-id":"src/pages/StoryDetail.tsx:414:10","data-matrix-name":"button","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"414","data-component-file":"StoryDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex%20items-center%20gap-2%20px-3%20py-1.5%20rounded-full%20bg-gray-100%20text-gray-600%20hover%3Abg-gray-200%20transition-colors%22%7D",children:[t.jsx(X,{className:"w-4 h-4","data-matrix-id":"src/pages/StoryDetail.tsx:418:12","data-matrix-name":"Share2","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"418","data-component-file":"StoryDetail.tsx","data-component-name":"Share2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),t.jsx("span",{"data-matrix-id":"src/pages/StoryDetail.tsx:419:12","data-matrix-name":"span","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"419","data-component-file":"StoryDetail.tsx","data-component-name":"span",children:"Share"})]})]}),t.jsx("div",{className:"prose prose-lg max-w-none","data-matrix-id":"src/pages/StoryDetail.tsx:424:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"424","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22prose%20prose-lg%20max-w-none%22%7D",children:t.jsx("div",{className:"whitespace-pre-wrap text-foreground leading-relaxed","data-matrix-id":"src/pages/StoryDetail.tsx:425:10","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"425","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22whitespace-pre-wrap%20text-foreground%20leading-relaxed%22%7D",children:e.content})}),t.jsxs("div",{className:"mt-12 pt-8 border-t border-border","data-matrix-id":"src/pages/StoryDetail.tsx:431:8","data-matrix-name":"div","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"431","data-component-file":"StoryDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-12%20pt-8%20border-t%20border-border%22%7D",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-6","data-matrix-id":"src/pages/StoryDetail.tsx:432:10","data-matrix-name":"h3","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"432","data-component-file":"StoryDetail.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20mb-6%22%7D",children:["Comments (",e.comment_count||0,")"]}),t.jsx(Z,{storyId:e.id,userId:r==null?void 0:r.id,sessionId:f,onCommentAdded:()=>{x(a=>a?{...a,comment_count:(a.comment_count||0)+1}:null)},"data-matrix-id":"src/pages/StoryDetail.tsx:433:10","data-matrix-name":"CommentSystem","data-component-path":"src/pages/StoryDetail.tsx","data-component-line":"433","data-component-file":"StoryDetail.tsx","data-component-name":"CommentSystem","data-component-content":"%7B%22storyId%22%3A%22%5BMemberExpression%5D%22%2C%22userId%22%3A%22%5BOptionalMemberExpression%5D%22%2C%22sessionId%22%3A%22%5BIdentifier%5D%22%2C%22onCommentAdded%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})]})]})]})}export{pt as default};
