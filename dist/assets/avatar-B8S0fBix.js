import{c as y,n as F,r as c,s as p,j as m,w as P,P as x,T as B,K as g,d as S}from"./index-lJi5ZKDq.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=y("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=y("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function oa(){const{user:a}=F(),[e,t]=c.useState({badges:[],achievements:[],leaderboard:null,isLoading:!1,error:null}),s=c.useCallback(async()=>{if(a){t(n=>({...n,isLoading:!0,error:null}));try{const{data:n,error:i}=await p.functions.invoke("gamification-system",{body:{action:"get_user_badges",userId:a.id}});if(i)throw i;t(d=>({...d,badges:n||[],isLoading:!1}))}catch(n){t(i=>({...i,error:n.message||"Failed to load badges",isLoading:!1}))}}},[a]),o=c.useCallback(async()=>{if(a)try{const{data:n,error:i}=await p.functions.invoke("gamification-system",{body:{action:"get_user_achievements",userId:a.id}});if(i)throw i;t(d=>({...d,achievements:n||[]}))}catch(n){console.error("Failed to load achievements:",n)}},[a]),r=c.useCallback(async()=>{try{const{data:n,error:i}=await p.functions.invoke("gamification-system",{body:{action:"get_leaderboard"}});if(i)throw i;t(d=>({...d,leaderboard:n}))}catch(n){console.error("Failed to load leaderboard:",n)}},[]),l=c.useCallback(async(n,i)=>{var d;if(a)try{const{data:u,error:v}=await p.functions.invoke("gamification-system",{body:{action:"check_achievements",userId:a.id,eventType:n,eventData:i}});if(v)throw v;return((d=u==null?void 0:u.newBadges)==null?void 0:d.length)>0?(await s(),await o(),u.newBadges):[]}catch(u){return console.error("Failed to check achievements:",u),[]}},[a,s,o]);return c.useEffect(()=>{a&&(s(),o(),r())},[a,s,o,r]),{...e,loadBadges:s,loadAchievements:o,loadLeaderboard:r,checkAchievements:l}}var b={exports:{}},k={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=c;function D(a,e){return a===e&&(a!==0||1/a===1/e)||a!==a&&e!==e}var H=typeof Object.is=="function"?Object.is:D,T=f.useState,V=f.useEffect,$=f.useLayoutEffect,q=f.useDebugValue;function G(a,e){var t=e(),s=T({inst:{value:t,getSnapshot:e}}),o=s[0].inst,r=s[1];return $(function(){o.value=t,o.getSnapshot=e,h(o)&&r({inst:o})},[a,t,e]),V(function(){return h(o)&&r({inst:o}),a(function(){h(o)&&r({inst:o})})},[a]),q(t),t}function h(a){var e=a.getSnapshot;a=a.value;try{var t=e();return!H(a,t)}catch{return!0}}function K(a,e){return e()}var z=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?K:G;k.useSyncExternalStore=f.useSyncExternalStore!==void 0?f.useSyncExternalStore:z;b.exports=k;var O=b.exports;function U(){return O.useSyncExternalStore(W,()=>!0,()=>!1)}function W(){return()=>{}}var A="Avatar",[Z]=P(A),[J,E]=Z(A),L=c.forwardRef((a,e)=>{const{__scopeAvatar:t,...s}=a,[o,r]=c.useState("idle");return m.jsx(J,{scope:t,imageLoadingStatus:o,onImageLoadingStatusChange:r,children:m.jsx(x.span,{...s,ref:e})})});L.displayName=A;var C="AvatarImage",I=c.forwardRef((a,e)=>{const{__scopeAvatar:t,src:s,onLoadingStatusChange:o=()=>{},...r}=a,l=E(C,t),n=Q(s,r),i=B(d=>{o(d),l.onImageLoadingStatusChange(d)});return g(()=>{n!=="idle"&&i(n)},[n,i]),n==="loaded"?m.jsx(x.img,{...r,ref:e,src:s}):null});I.displayName=C;var N="AvatarFallback",R=c.forwardRef((a,e)=>{const{__scopeAvatar:t,delayMs:s,...o}=a,r=E(N,t),[l,n]=c.useState(s===void 0);return c.useEffect(()=>{if(s!==void 0){const i=window.setTimeout(()=>n(!0),s);return()=>window.clearTimeout(i)}},[s]),l&&r.imageLoadingStatus!=="loaded"?m.jsx(x.span,{...o,ref:e}):null});R.displayName=N;function w(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Q(a,{referrerPolicy:e,crossOrigin:t}){const s=U(),o=c.useRef(null),r=s?(o.current||(o.current=new window.Image),o.current):null,[l,n]=c.useState(()=>w(r,a));return g(()=>{n(w(r,a))},[r,a]),g(()=>{const i=v=>()=>{n(v)};if(!r)return;const d=i("loaded"),u=i("error");return r.addEventListener("load",d),r.addEventListener("error",u),e&&(r.referrerPolicy=e),typeof t=="string"&&(r.crossOrigin=t),()=>{r.removeEventListener("load",d),r.removeEventListener("error",u)}},[r,t,e]),l}var _=L,j=I,M=R;const X=c.forwardRef(({className:a,...e},t)=>m.jsx(_,{ref:t,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e,"data-matrix-id":"src/components/ui/avatar.tsx:10:2","data-matrix-name":"AvatarPrimitive.Root","data-component-path":"src/components/ui/avatar.tsx","data-component-line":"10","data-component-file":"avatar.tsx","data-component-name":"AvatarPrimitive.Root","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%2C%22...spread%22%3Atrue%7D"}));X.displayName=_.displayName;const Y=c.forwardRef(({className:a,...e},t)=>m.jsx(j,{ref:t,className:S("aspect-square h-full w-full",a),...e,"data-matrix-id":"src/components/ui/avatar.tsx:25:2","data-matrix-name":"AvatarPrimitive.Image","data-component-path":"src/components/ui/avatar.tsx","data-component-line":"25","data-component-file":"avatar.tsx","data-component-name":"AvatarPrimitive.Image","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%2C%22...spread%22%3Atrue%7D"}));Y.displayName=j.displayName;const aa=c.forwardRef(({className:a,...e},t)=>m.jsx(M,{ref:t,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e,"data-matrix-id":"src/components/ui/avatar.tsx:37:2","data-matrix-name":"AvatarPrimitive.Fallback","data-component-path":"src/components/ui/avatar.tsx","data-component-line":"37","data-component-file":"avatar.tsx","data-component-name":"AvatarPrimitive.Fallback","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%2C%22...spread%22%3Atrue%7D"}));aa.displayName=M.displayName;export{X as A,ta as C,ra as S,na as T,Y as a,aa as b,oa as u};
