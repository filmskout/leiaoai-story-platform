import{c as W}from"./index-Dy8cuphJ.js";import{j as R}from"./vendor-ui-DPGpZYCr.js";import{r as s}from"./vendor-react-CpsyMv2-.js";import{M as q,i as A,u as I,P as D,a as H,b as K,L as U}from"./proxy-CiyaKLYz.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=W("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function v(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function B(...e){return o=>{let t=!1;const r=e.map(i=>{const n=v(i,o);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let i=0;i<r.length;i++){const n=r[i];typeof n=="function"?n():v(e[i],null)}}}}function F(...e){return s.useCallback(B(...e),e)}class G extends s.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=A(r)&&r.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=i-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function T({children:e,isPresent:o,anchorX:t,root:r}){const i=s.useId(),n=s.useRef(null),h=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=s.useContext(q),E=F(n,e==null?void 0:e.ref);return s.useInsertionEffect(()=>{const{width:f,height:m,top:u,left:a,right:p}=h.current;if(o||!n.current||!f||!m)return;const C=t==="left"?`left: ${a}`:`right: ${p}`;n.current.dataset.motionPopId=i;const l=document.createElement("style");g&&(l.nonce=g);const M=r??document.head;return M.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${m}px !important;
            ${C}px !important;
            top: ${u}px !important;
          }
        `),()=>{M.contains(l)&&M.removeChild(l)}},[o]),R.jsx(G,{isPresent:o,childRef:n,sizeRef:h,children:s.cloneElement(e,{ref:E})})}const V=({children:e,initial:o,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:n,mode:h,anchorX:g,root:E})=>{const f=I(X),m=s.useId();let u=!0,a=s.useMemo(()=>(u=!1,{id:m,initial:o,isPresent:t,custom:i,onExitComplete:p=>{f.set(p,!0);for(const C of f.values())if(!C)return;r&&r()},register:p=>(f.set(p,!1),()=>f.delete(p))}),[t,f,r]);return n&&u&&(a={...a}),s.useMemo(()=>{f.forEach((p,C)=>f.set(C,!1))},[t]),s.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),h==="popLayout"&&(e=R.jsx(T,{isPresent:t,anchorX:g,root:E,children:e})),R.jsx(D.Provider,{value:a,children:e})};function X(){return new Map}const P=e=>e.key||"";function z(e){const o=[];return s.Children.forEach(e,t=>{s.isValidElement(t)&&o.push(t)}),o}const Q=({children:e,custom:o,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:n="sync",propagate:h=!1,anchorX:g="left",root:E})=>{const[f,m]=H(h),u=s.useMemo(()=>z(e),[e]),a=h&&!f?[]:u.map(P),p=s.useRef(!0),C=s.useRef(u),l=I(()=>new Map),[M,S]=s.useState(u),[x,L]=s.useState(u);K(()=>{p.current=!1,C.current=u;for(let d=0;d<x.length;d++){const c=P(x[d]);a.includes(c)?l.delete(c):l.get(c)!==!0&&l.set(c,!1)}},[x,a.length,a.join("-")]);const w=[];if(u!==M){let d=[...u];for(let c=0;c<x.length;c++){const y=x[c],k=P(y);a.includes(k)||(d.splice(c,0,y),w.push(y))}return n==="wait"&&w.length&&(d=w),L(z(d)),S(u),null}const{forceRender:j}=s.useContext(U);return R.jsx(R.Fragment,{children:x.map(d=>{const c=P(d),y=h&&!f?!1:u===x||a.includes(c),k=()=>{if(l.has(c))l.set(c,!0);else return;let $=!0;l.forEach(b=>{b||($=!1)}),$&&(j==null||j(),L(C.current),h&&(m==null||m()),r&&r())};return R.jsx(V,{isPresent:y,initial:!p.current||t?void 0:!1,custom:o,presenceAffectsLayout:i,mode:n,root:E,onExitComplete:y?void 0:k,anchorX:g,children:d},c)})})};export{Q as A,O as S};
